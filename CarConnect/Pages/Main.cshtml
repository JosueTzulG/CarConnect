@page
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize(Policy = "AdminOnly")]
@model CarConnect.Pages.MainModel

@{
    ViewData["Title"] = "Main";
}

<h1>Administracion</h1>

<div class="button-container">
    <!-- Botón para editar carros -->
    <button id="editCarsButton" class="btn btn-primary btn-block">Editar Carros</button>
    <!-- Botón para editar usuarios -->
    <button id="editUsersButton" class="btn btn-primary btn-block">Editar Usuarios</button>
</div>

<div id="carsContent" class="content" style="display: none;">
        <button id="createCarButton">Agregar Carro</button>
        <div id="createCarFormContainer" style="display: none;">
            <h3>Crear Nuevo Carro</h3>
            <form id="createCarForm">
                <label for="name">Nombre de Carro:</label>
                <input type="text" id="name" name="name" required>

                <label for="description">Descripcion:</label>
                <input type="text" id="description" name="description" required>

                <label for="color">Color:</label>
                <input type="text" id="color" name="color" required>

                <label for="type">Tipo:</label>
                <input type="text" id="type" name="type" required>

                <label for="tier">Tier:</label>
                <input type="text" id="tier" name="tier" required>

                <label for="state">Estado:</label>
                <input type="text" id="state" name="state" required>

                <button type="submit" class="btn btn-primary">Crear Carro</button>
            </form>
        </div>
        <div id="searchCarContainer">
            <h2>Buscar Carros</h2>
            <input type="text" id="searchCar" placeholder="Buscar por modelo o marca" class="form-control" />
            <button id="searchCarButton" class="btn btn-secondary">Buscar</button>
            <div id="searchResults" class="mt-3"></div>
        </div>
        <!-- Contenedor para el formulario de edición -->
        <div id="editCarFormContainer" class="mt-4"></div>
</div>


<div id="usersContent" class="content" style="display: none;">
        <!-- Botón para agregar un nuevo usuario -->
        <button id="createUserButton" class="btn btn-success">Agregar Usuario</button>

        <!-- Contenedor para el formulario de creación de usuarios -->
        <div id="createUserFormContainer" style="display: none;">
            <h3>Crear Nuevo Usuario</h3>
            <form id="createUserForm">
                <label for="username">Nombre de Usuario:</label>
                <input type="text" id="username" name="username" required>

                <label for="password">Contraseña:</label>
                <input type="text" id="password" name="password" required>

                <label for="role">Rol:</label>
                <input type="text" id="role" name="role" required>

                <button type="submit" class="btn btn-primary">Crear Usuario</button>
            </form>
        </div>

        <!-- Lista dinámica de usuarios -->
        <div id="usersListContainer">
        <h2>Lista de Usuarios</h2>
            <!-- La lista de usuarios se llenará dinámicamente -->
            <div id="usersList"></div>
        </div>
        <div id="editUserFormContainer" class="mt-4"></div>
</div>


@section Scripts {
<script src="~/js/adminMain.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // Elementos específicos del DOM
        const editCarsButton = document.getElementById("editCarsButton");
        const carsContent = document.getElementById("carsContent");

        const editUsersButton = document.getElementById("editUsersButton");
        const usersContent = document.getElementById("usersContent");

        editCarsButton.addEventListener("click", () => {
            carsContent.style.display = carsContent.style.display == "none" ? "block" : "none";
        });

        // Mostrar/ocultar la sección de usuarios
        editUsersButton.addEventListener("click", () => {
            usersContent.style.display = usersContent.style.display === "none" ? "block" : "none";
        });
    });
</script>
}

